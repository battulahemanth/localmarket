<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact - Local Market</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <nav>
    <div class="logo"><span class="logo-icon"> 
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6"/></svg>
    </span><span class="logo-text">localmarket</span></div>
    <ul id="navbarLinks">
      <li><a href="index.html">Home</a></li>
      <li><a href="categories.html">Categories</a></li>
      <li><a href="add-to-cart.html">my Cart</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="order-history.html">Order History</a></li>
    </ul>
    <button id="modeToggle">ðŸŒ™</button>
    <button id="menuToggle" class="menu-toggle" aria-label="Open navigation">&#9776;</button>
  </nav>

  
  <section id="contact" style="max-width: 500px; margin: 3rem auto; background: var(--nav-bg); padding: 2rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08);">
    <h2 style="text-align:center; margin-bottom:1.5rem;">Contact Us</h2>
    <div id="order-summary" style="margin-bottom:2rem;"></div>
    <form id="contactForm" action="https://formsubmit.co/battulahemanth1998@gmail.com" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="order_summary" id="order_summary_input">
      <!-- Optional settings -->
      <input type="hidden" name="_next" value="thankyou.html">
      <input type="hidden" name="_captcha" value="false">
    
      <!-- Your inputs here -->
      <label for="name" style="display:block; margin-bottom:0.5rem;">Name</label>
      <input type="text" id="name" name="name" required
        style="width:100%; padding:0.6rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:6px;">

      <label for="phone" style="display:block; margin-bottom:0.5rem;">Phone</label>
      <input type="tel" id="phone" name="phone" required
        style="width:100%; padding:0.6rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:6px;">  
    
      <label for="email" style="display:block; margin-bottom:0.5rem;">Email</label>
      <input type="email" id="email" name="email" required
        style="width:100%; padding:0.6rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:6px;">
    
      <label for="message" style="display:block; margin-bottom:0.5rem;">If you need anything message me on this textbox  </label>
      <textarea id="message" name="message" rows="6" cols="40" 
        style="width:100%; padding:0.6rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:6px;"></textarea>

        <label for="message" style="display:block; margin-bottom:0.5rem;">address</label>
        <textarea id="address" name="address" rows="5" required
          style="width:100%; padding:0.6rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:6px;"></textarea>
    
        <label for="photo" style="display:block; margin-bottom:0.5rem;">choose a photo</label>
        <input type="file" id="photo" name="photo" accept="image/*" capture="user"
          style="margin-bottom:1.5rem; display:block;">
        
      <button type="submit"
        style="width:100%; padding:0.75rem; background-color:#3c17f3; color:white; font-weight:bold; border:none; border-radius:6px; cursor:pointer;">
        Send
      </button>
    </form>
    
  </section>
  
  
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-about">
        <h3>local market</h3>
        <p>Groceries Home delivered. Your one-stop shop for fresh produce, snacks, and daily essentials.</p>
      </div>
      <div class="footer-links">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="categories.html">Categories</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h4>Contact</h4>
        <p>Email:localmarket17@gmail.com</p>
        <p>Phone: 9966284758 / 8340825823</p>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    // Display order summary from URL
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
    const cartData = getQueryParam('cart');
    const amount = getQueryParam('amount');
    let summaryHtml = '';
    let orderSummaryText = '';
    if (cartData) {
      const cart = JSON.parse(decodeURIComponent(cartData));
      summaryHtml += '<h3>Your Order</h3><ul style="padding-left:1.2em;">';
      orderSummaryText += 'Order Details:\n';
      cart.forEach(item => {
        summaryHtml += `<li>${item.name} x ${item.quantity} - â‚¹${item.price * item.quantity}</li>`;
        orderSummaryText += `${item.name} x ${item.quantity} - â‚¹${item.price * item.quantity}\n`;
      });
      summaryHtml += `</ul><div style="font-weight:bold;">Total: â‚¹${amount}</div>`;
      orderSummaryText += `Total: â‚¹${amount}`;
    } else {
      summaryHtml = '<em>No order data found.</em>';
    }
    document.getElementById('order-summary').innerHTML = summaryHtml;
    document.getElementById('order_summary_input').value = orderSummaryText;

    // Prefill the textarea if orders are present
    window.onload = function() {
      const urlParams = new URLSearchParams(window.location.search);
      const orders = urlParams.get('orders');
      if (orders) {
        document.getElementById('message').value = decodeURIComponent(orders);
      }
    };

    // On form submit, clear cart orders from localStorage
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      // Get cart from URL
      const cartData = getQueryParam('cart');
      if (!cartData) return; // No cart, do nothing

      const cart = JSON.parse(decodeURIComponent(cartData));
      if (!cart.length) return;

      // Get customer info from form
      const name = document.getElementById('name').value;
      const phone = document.getElementById('phone').value;
      const address = document.getElementById('address').value;

      // Get payment method (default to 'upi')
      const paymentMethod = 'upi';

      // Build new order object
      const newOrder = {
        orderId: 'ORD' + Date.now(),
        items: cart,
        customerInfo: { name, phone, address },
        paymentMethod,
        status: 'confirmed',
        paymentDate: new Date().toISOString()
      };

      // Save to orderHistory
      const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      orderHistory.push(newOrder);
      localStorage.setItem('orderHistory', JSON.stringify(orderHistory));

      // Clear cart
      localStorage.removeItem('cart');

      // Show thank you message and hide form
      e.preventDefault();
      document.getElementById('contactForm').style.display = 'none';
      document.getElementById('order-summary').style.display = 'none';
      const thankYouDiv = document.createElement('div');
      thankYouDiv.style.textAlign = 'center';
      thankYouDiv.style.margin = '2rem 0';
      thankYouDiv.innerHTML = '<h2>Thank you for ordering on our website!</h2><p>Your order has been received. We will contact you soon.</p>';
      document.querySelector('#contact section, #contact').appendChild(thankYouDiv);
    });

    document.getElementById('menuToggle').addEventListener('click', function(event) {
      document.getElementById('navbarLinks').classList.toggle('active');
      event.stopPropagation();
    });
    document.addEventListener('click', function(event) {
      var navbarLinks = document.getElementById('navbarLinks');
      var menuToggle = document.getElementById('menuToggle');
      if (
        navbarLinks.classList.contains('active') &&
        !navbarLinks.contains(event.target) &&
        !menuToggle.contains(event.target)
      ) {
        navbarLinks.classList.remove('active');
      }
    });
  </script>
</body>
</html> 